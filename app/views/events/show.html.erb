<h4 class="my-3 mx-5">Event in Detail</h4>

<div class="border border-dark rounded mx-5">
  <div class="py-3 px-3">

    <div class="d-flex flex-row">
      <%= image_tag( @event.image, height: 100, width: 100, class: "" ) if @event.image.attached? %>
      <div class="ms-3">
        <p><strong><%= @event.title %></strong></p>
       
        <div class="me-3">
            <span><%= image_tag "calendar.jpg", size: "20x20", class: "me-1" %></span>
            <span><small><%= @event.date.strftime("%b %d %Y") %></small></span>
          </div>
      </div>
    </div>

    <div class="border border-dark rounded my-4 py-3 px-3">
      <%= @event.description %>
    </div>

    <div class="d-flex flex-row justify-content-end">
      <%= image_tag( @event.creator.avatar, height: 30, width: 30, class: "rounded-circle" ) if @event.creator.avatar.attached? %>
      <small class="ms-2"><%= @event.creator.username %></small>
    </div>

    <% if current_user_is_host?(@event) %>
      <%= button_to "Invite Users", guestlists_path, params: {:event_id => @event.id}, method: :get, class: "btn btn-outline-primary py-0" %>
    <% else %>
      <% if accepted?(@reservation) %>
        <%= button_to "Cancel Enrollment", invitation_path(id: @reservation.id, event_id: @event.id, user_id: current_user.id,  status: 'cancelled'), method: :delete, class: "btn btn-outline-danger py-0" %>
      <% else %>
        <%= button_to "Enroll", invitation_path(event_id: @event.id, status: 'approved'), method: :patch, class: "btn btn-outline-primary py-0" %>
      <% end %>
    <% end %>  
  </div>
</div>

<div class="ms-5">
  <small><%= link_to 'Back', events_path %></small>
</div>
