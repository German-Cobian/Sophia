<div class="my-5 mx-5">

    <div class="d-flex flex-row justify-content-start">
      <%= image_tag( @article.image, height: 120, width: 120, class: "me-5" ) if @article.image.attached? %> 
      <div class="mt-3">
        <strong class="me-4"><%= @article.title %></strong>
        <small><%= @article.category.topic%></small>
        <div class="d-flex flex-row justify-content-start mt-3">
          <p class="me-3"><strong>By: </strong></p>
          <%= image_tag( @article.user.avatar, height: 30, width: 30, class: "rounded-circle" ) if @article.user.avatar.attached?%>
          <p class="ms-2"><%= @article.user.username %><p>
        </div>
      </div>
    </div>

    <div class="mt-5">
      <%= @article.body %>
    </div>

    <div class="d-flex flex-row mt-3">
      <div class="mt-1">
        <span><strong>Votes: </strong><%= @article.votes.count %></span>
      </div>
      <% vote = current_user.votes.find_by(article: @article) %>
      <% if vote.nil? %>
        <%= button_to "Upvote", votes_path, params: { vote: {:article_id => @article.id } }, method: :post, class: "btn btn-outline-primary py-0 ms-5" %>
      <% else %>
        <%= button_to "Downvote", vote_path(vote), method: :delete, class: "btn btn-outline-primary py-0 ms-5" %>
      <% end %>
    </div>

    <% if current_user %>
      <div>
        <%= render '/comments/show' %>
      </div>
      <div>
        <%= render '/comments/form' %>
      </div>
    <% end %>

    <div class="mt-3">
      <%= link_to 'Back', categories_path %>
    </div>

</div>
